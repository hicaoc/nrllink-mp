<view class="container">
  <!-- 用户信息卡片 -->
  <view class="user-card">
    <image class="avatar" src="{{userInfo.avatar}}" mode="aspectFill"></image>
    <view class="info">
      <text class="name">{{userInfo.name}}</text>
      <text class="call-sign">{{userInfo.callsign}}-100</text>
      <text class="current-group" wx:if="{{currentGroup}}">{{currentGroup}}</text>
    </view>
  </view>

  <!-- 编码选择 -->
  <!-- <view class="codec-select">
    <text class="title">编码协议</text>
    <radio-group class="radio-group" bindchange="changeCodec">
      <label class="radio-item">
        <radio value="g711" checked/>G711
      </label>
      <label class="radio-item">
        <radio value="opus"/>Opus
      </label>
    </radio-group>
  </view> -->

  <!-- 当前通话信息 -->
  <view class="current-call" wx:if="{{currentCall.CallSign}}">
    <text class="call-info">正在与 {{currentCall.CallSign}}-{{currentCall.SSID}} 通话</text>
  </view>

  <!-- 通话按钮 -->
  <view class="talk-container">
    <button 
      class="talk-btn {{isTalking ? 'active' : ''}}" 
      bindtouchstart="startRecording" 
      bindtouchend="stopRecording"
    >
      {{isTalking ? '正在讲话...' : '按住讲话'}}
    </button>
  </view>

  <!-- 服务器状态 -->
  <view class="server-status">
    <view class="status-indicator {{serverConnected ? 'connected' : 'disconnected'}}"></view>
    <text class="status-text">{{serverConnected ? '服务器在线' : '服务器离线'}}</text>
  </view>

  <!-- 控制面板 -->
  <view class="control-panel">
    <!-- 群组选择 -->
    <view class="control-item">
      <view class="control-label">选择群组</view>
      <picker mode="selector" range="{{groups}}" range-key="displayName" bindchange="selectGroup">
        <view class="picker">
          {{selectedGroup ? groups[selectedGroup].displayName : '请选择群组'}}
        </view>
      </picker>
    </view>

    <!-- 设备选择 -->
    <view class="control-item">
      <view class="control-label">选择设备</view>
    <picker mode="selector" range="{{devices}}" range-key="displayName" value="{{selectedDeviceIndex}}" bindchange="selectDevice">
        <view class="picker">
          {{selectedDeviceIndex !== null ? devices[selectedDeviceIndex].displayName : '请选择设备'}}
        </view>
      </picker>
    </view>

    <!-- 加入群组按钮 -->
    <button class="join-btn" bindtap="joinGroup">加入群组</button>
  </view>

</view>
